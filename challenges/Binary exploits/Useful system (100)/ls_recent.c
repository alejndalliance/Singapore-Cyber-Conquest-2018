// ls_recent
//
// Shows details of the most recently modified file in the
// specified directory.
//
#include <stdio.h>
#include <stdlib.h>

#define COMMAND_BUF_SIZE 100

int main(int argc, char *argv[]) 
{
  // Directory to look in - default to the current dir
  char* path = ".";

  // If the user specifies a path on the command line, use it
  if( argc >= 2 )
  {
    path = argv[1];
  }

  // Make the command string
  char command[COMMAND_BUF_SIZE+1];
  snprintf(command, 
           COMMAND_BUF_SIZE, 
           "/bin/ls -lort %s | tail -n 1", 
           path);

  printf("Running command: %s\n", command);

  return system(command);
}

// Challenge idea by Chris Leat
